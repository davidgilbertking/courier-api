# Courier API

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—å–µ—Ä–∞–º–∏, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º –∏ –∑–∞—è–≤–∫–∞–º–∏ –∫—É—Ä—å–µ—Ä–æ–≤. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ Yii2.

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- CRUD –¥–ª—è –∫—É—Ä—å–µ—Ä–æ–≤, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –∏ –∑–∞—è–≤–æ–∫
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ API –∫–ª—é—á—É
- Swagger UI (`/docs`)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CORS
- –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ Vagrant)

```bash
git clone https://github.com/davidgilbertking/courier-api.git
cd courier-api
composer install
cp .env.example .env # –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è
php yii migrate
php -S localhost:8080 -t web
```

–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:8080/docs](http://localhost:8080/docs) –¥–ª—è Swagger UI.

---

## üß™ –¢–µ—Å—Ç—ã

```bash
vendor/bin/codecept run
```

---

## üêò –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Vagrant (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ)

–ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é **Vagrant**, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–ª–∞–≥–∏–Ω—ã:

```bash
vagrant plugin install vagrant-hostmanager vagrant-vbguest
```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
cp vagrant/config/vagrant-local.example.yml vagrant/config/vagrant-local.yml
```

3. –ó–∞–º–µ–Ω–∏—Ç–µ `github_token` –Ω–∞ –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω GitHub:  
   –ü–æ–ª—É—á–∏—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ –∑–¥–µ—Å—å: https://github.com/settings/tokens

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É:

```bash
vagrant up
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://yii2basic.test (–∏–ª–∏ IP –∏–∑ `vagrant-local.yml`)

> ‚ö†Ô∏è Vagrant **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤—Ä—É—á–Ω—É—é –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ.

---

## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OpenAPI –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ `/openapi.yaml` –∏ –≤ Swagger UI –ø–æ –∞–¥—Ä–µ—Å—É `/docs`.

---

## ‚öôÔ∏è Swagger UI

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8080/docs
```

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤ (POST, PUT, DELETE) —á–µ—Ä–µ–∑ Swagger UI –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. **–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—å–µ—Ä–∞ —Å —Ä–æ–ª—å—é `main`** (–≤ Swagger'e –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `curl`):

   ```bash
   curl -X 'POST' \
     'http://localhost:8080/couriers' \
     -H 'accept: application/json' \
     -H 'Content-Type: application/json' \
     -d '{
       "role": "main",
       "email": "admin@example.com",
       "first_name": "Admin",
       "last_name": "User"
     }'
   ```

2. **–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (api_token)**:

   ```bash
   curl -X 'GET' \
     'http://localhost:8080/couriers?role=main' \
     -H 'accept: application/json'
   ```

   –ù–∞–π–¥–∏—Ç–µ –≤ –æ—Ç–≤–µ—Ç–µ –ø–æ–ª–µ `api_token` —É —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∫—É—Ä—å–µ—Ä–∞.

3. **–û—Ç–∫—Ä—ã—Ç—å Swagger UI** ‚Üí –Ω–∞–∂–∞—Ç—å **Authorize** (–≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É), –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ:

   ```
   X-Api-Key: <–≤–∞—à API —Ç–æ–∫–µ–Ω>
   ```

4. –ù–∞–∂–º–∏—Ç–µ **Authorize**, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Swagger –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.


## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.1+
- Composer
- MySQL
- Vagrant (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üßæ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License.